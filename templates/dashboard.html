{% extends 'base.html' %}

{% block content %}

<style>
/* ===== FONT ===== */
* {
    font-family: 'Poppins', sans-serif;
}

/* ===== PAGE BACKGROUND (GLOBAL THEME) ===== */
.dashboard-page {
    background:
        radial-gradient(circle at 15% 20%, rgba(255, 221, 153, 0.7), transparent 40%),
        radial-gradient(circle at 85% 80%, rgba(255, 183, 77, 0.6), transparent 40%),
        linear-gradient(135deg, #fff7e6, #ffe0b2);
    min-height: calc(100vh - 90px);
    padding: 40px 20px;
}

/* ===== MAIN WRAPPER ===== */
.dashboard-wrapper {
    background: rgba(255, 255, 255, 0.96);
    border-radius: 32px;
    padding: 40px;
    box-shadow: 0 30px 80px rgba(0, 0, 0, 0.15);
}

/* ===== HEADER ===== */
.dashboard-title {
    font-weight: 800;
    color: #111827;
}

.dashboard-title span {
    background: linear-gradient(135deg, #ff512f, #f09819);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.dashboard-subtitle {
    color: #374151;
}

/* ===== BUTTON ===== */
.btn-primary {
    background: linear-gradient(135deg, #ff512f, #f09819);
    border: none;
    font-weight: 600;
    box-shadow: 0 12px 30px rgba(240, 152, 25, 0.45);
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 18px 45px rgba(255, 81, 47, 0.5);
}

/* ===== GLASS CARD ===== */
.glass-card {
    background: rgba(255, 255, 255, 0.97);
    border-radius: 24px;
    box-shadow: 0 25px 60px rgba(0, 0, 0, 0.12);
    transition: transform 0.25s ease;
}

.glass-card:hover {
    transform: translateY(-6px);
}

/* ===== STAT TEXT ===== */
.stat-value {
    font-size: 2rem;
    font-weight: 800;
    color: #111827;
}

.stat-label {
    font-size: 0.9rem;
    color: #6b7280;
}

/* ===== PERFORMANCE TITLE ===== */
.performance-title {
    font-weight: 700;
    color: #111827;
    border-bottom: 1px solid #fde68a;
    padding-bottom: 10px;
}
</style>

<div class="container-fluid dashboard-page">

    <div class="dashboard-wrapper">

        <!-- HEADER -->
        <div class="row mb-5 align-items-center">
            <div class="col-md-8">
                <h2 class="dashboard-title display-6">
                    Hello, <span>{{ user.username }}</span> ðŸ‘‹
                </h2>
                <p class="dashboard-subtitle">
                    Here is your learning progress for this week.
                </p>
            </div>

            <div class="col-md-4 text-md-end mt-3 mt-md-0">
                <a href="{{ url_for('chat_page') }}" class="btn btn-primary rounded-pill px-4">
                    <i class="fa-solid fa-play"></i> Start New Topic
                </a>
            </div>
        </div>

        <!-- STATS -->
        <div class="row g-4 mb-5">

            <div class="col-md-3">
                <div class="glass-card p-4 text-center">
                    <i class="fa-solid fa-video fa-2x text-info mb-3"></i>
                    <div class="stat-value">{{ user.videos_watched }}</div>
                    <div class="stat-label">Videos Summarized</div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="glass-card p-4 text-center">
                    <i class="fa-solid fa-star fa-2x text-warning mb-3"></i>
                    <div class="stat-value">{{ user.points }}</div>
                    <div class="stat-label">Total Points</div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="glass-card p-4 text-center">
                    <i class="fa-solid fa-brain fa-2x text-danger mb-3"></i>
                    <div class="stat-value">{{ user.quiz_average }}%</div>
                    <div class="stat-label">Quiz Average</div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="glass-card p-4 text-center">
                    <i class="fa-solid fa-fire fa-2x text-danger mb-3"></i>
                    <div class="stat-value">{{ user.streak }} Days</div>
                    <div class="stat-label">Learning Streak</div>
                </div>
            </div>

        </div>

        <!-- PERFORMANCE GRAPH -->
        <div class="row">
            <div class="col-md-8 mx-auto">
                <div class="glass-card p-4">
                    <h4 class="performance-title mb-4">
                        <i class="fa-solid fa-chart-simple text-success"></i>
                        Subject Performance
                    </h4>

                    <div class="text-center">
                        {% if graph_image %}
                            <img
                                src="{{ graph_image }}"
                                alt="Performance Graph"
                                class="img-fluid rounded shadow-sm"
                            >
                        {% else %}
                            <p class="text-muted">No data available yet.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

{% endblock %}